#include "stm32f4xx.h"
#include "stm32f4_discovery.h"

//yapýlacak iþlemler;
//d portunu aktif etmemiz lazým led kullanacaðýz diye
//a portundan da analog veri okuyalým

GPIO_InitTypeDef GPIO_InitStruct;
//adc için iki farklý yapý oluþturmamýz gerekiyor.
ADC_InitTypeDef ADC_InitStruct;
ADC_CommonInitTypeDef ADC_CommonInitStruct;


void ADC_Config(){
	RCC_APB2PeriphClockCmd(RCC_APB2Periph_ADC1, ENABLE);//clock hattýný aktif et

	//ADC_CommonInitStruct.ADC_DMAAccessMode //Arada cpu olmadan okuduðu veriyi direkt belleðe yazma iþlemi bu yüzden bunu kullanmýyoruz.
	ADC_CommonInitStruct.ADC_Mode= ADC_Mode_Independent ; //tek bir adc okumasý yapýyoruz ve o da baðýmsýz olacak
	ADC_CommonInitStruct.ADC_Prescaler= ADC_Prescaler_Div4; //2-4-6-8 bölme iþlemi [adc max 36MHz çalýþýyor ve clock hattý ise max 84MHz gösteriyor bu deðeri 4 bölersek adc yi daha verimli kullanabiliriz]
	//ADC_CommonInitStruct.ADC_TwoSamplingDelay //iki örnek arasýnda süre demek þuanda buna ihtiyacýmýz yok

	ADC_CommonInit(&ADC_CommonInitStruct);

	//ADC_InitStruct.ADC_ContinuousConvMode //sürekli çevrim modu
	//ADC_InitStruct.ADC_DataAlign //verilerin nereye yaslanacaðý
	//ADC_InitStruct.ADC_ExternalTrigConv //harici tetikleme ile iþlemi baþlatma
	//ADC_InitStruct.ADC_NbrOfConversion //çoklu adc iþlemlerinde kullanýyoruz
	//ADC_InitStruct.ADC_ScanConvMode //tarama modu
	ADC_InitStruct.ADC_Resolution= ADC_Resolution_12b; //çözünürlük kaç bitte okuma yapacaksýnýz.

	ADC_Init(ADC1,&ADC_InitStruct);

	//ekstra olarak stm32f4 yapýsýnda çevresel birimlerin aktif edilmesi için ADC_Cmd birimi vardýr.

	ADC_Cmd(ADC1, ENABLE);

}

void GPIO_Config()
{
	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);
	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOD, ENABLE);

	GPIO_InitStruct.GPIO_Mode= GPIO_Mode_OUT; //D portu ledler olduðu için çýkýþ alacaðýz
	GPIO_InitStruct.GPIO_Pin= GPIO_Pin_12 | GPIO_Pin_13| GPIO_Pin_14 | GPIO_Pin_15; //ledlerin baðlý olduðu pinler
	GPIO_InitStruct.GPIO_OType= GPIO_OType_PP;
	GPIO_InitStruct.GPIO_PuPd= GPIO_PuPd_NOPULL;
	GPIO_InitStruct.GPIO_Speed= GPIO_Speed_100MHz;

	GPIO_Init(GPIOA, &GPIO_InitStruct);
}


int main(void)
{


  while (1)
  {

  }
}



void EVAL_AUDIO_TransferComplete_CallBack(uint32_t pBuffer, uint32_t Size){
  /* TODO, implement your code here */
  return;
}

/*
 * Callback used by stm324xg_eval_audio_codec.c.
 * Refer to stm324xg_eval_audio_codec.h for more info.
 */
uint16_t EVAL_AUDIO_GetSampleCallBack(void){
  /* TODO, implement your code here */
  return -1;
}
